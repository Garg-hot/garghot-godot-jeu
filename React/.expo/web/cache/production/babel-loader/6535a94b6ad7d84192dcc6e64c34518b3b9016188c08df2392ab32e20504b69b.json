{"ast":null,"code":"import React,{useState,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import{onAuthStateChanged,signOut}from'firebase/auth';import{FIREBASE_AUTH}from'./FirebaseCongig';import Login from'./app/screens/Login';import Plats from'./app/screens/Plats';import Cart from'./app/screens/Cart';import PlatDetails from'./app/screens/PlatDetails';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){const[user,setUser]=useState(null);const[isLoading,setIsLoading]=useState(true);const[currentScreen,setCurrentScreen]=useState('plats');const[selectedPlat,setSelectedPlat]=useState(null);useEffect(()=>{const logout=async()=>{try{await signOut(FIREBASE_AUTH);}catch(error){console.error('Erreur lors de la déconnexion:',error);}};logout();const unsubscribe=onAuthStateChanged(FIREBASE_AUTH,user=>{setUser(user);setIsLoading(false);});return unsubscribe;},[]);const handlePlatSelect=plat=>{setSelectedPlat(plat);setCurrentScreen('platDetails');};if(isLoading){return null;}if(!user){return _jsx(Login,{});}return _jsxs(View,{style:styles.container,children:[currentScreen==='plats'&&_jsx(Plats,{onCartPress:()=>setCurrentScreen('cart'),onPlatSelect:handlePlatSelect}),currentScreen==='cart'&&_jsx(Cart,{onBack:()=>setCurrentScreen('plats')}),currentScreen==='platDetails'&&selectedPlat&&_jsx(PlatDetails,{platId:selectedPlat.id,platNom:selectedPlat.nom,onBack:()=>setCurrentScreen('plats'),onAddToCart:()=>{setCurrentScreen('plats');}})]});}const styles=StyleSheet.create({container:{flex:1,backgroundColor:'#fff'}});","map":{"version":3,"names":["React","useState","useEffect","View","StyleSheet","onAuthStateChanged","signOut","FIREBASE_AUTH","Login","Plats","Cart","PlatDetails","jsx","_jsx","jsxs","_jsxs","App","user","setUser","isLoading","setIsLoading","currentScreen","setCurrentScreen","selectedPlat","setSelectedPlat","logout","error","console","unsubscribe","handlePlatSelect","plat","style","styles","container","children","onCartPress","onPlatSelect","onBack","platId","id","platNom","nom","onAddToCart","create","flex","backgroundColor"],"sources":["c:/Users/socid/OneDrive/Documents/ITU/EXAM WEB/essaiFirebase/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport { User, onAuthStateChanged, signOut } from 'firebase/auth';\nimport { FIREBASE_AUTH } from './FirebaseCongig';\nimport Login from './app/screens/Login';\nimport Plats from './app/screens/Plats';\nimport Cart from './app/screens/Cart';\nimport PlatDetails from './app/screens/PlatDetails';\n\ntype Screen = 'plats' | 'cart' | 'platDetails';\n\ninterface SelectedPlat {\n  id: string;\n  nom: string;\n}\n\nexport default function App() {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [currentScreen, setCurrentScreen] = useState<Screen>('plats');\n  const [selectedPlat, setSelectedPlat] = useState<SelectedPlat | null>(null);\n\n  useEffect(() => {\n    const logout = async () => {\n      try {\n        await signOut(FIREBASE_AUTH);\n      } catch (error) {\n        console.error('Erreur lors de la déconnexion:', error);\n      }\n    };\n    \n    logout();\n\n    const unsubscribe = onAuthStateChanged(FIREBASE_AUTH, (user) => {\n      setUser(user);\n      setIsLoading(false);\n    });\n\n    return unsubscribe;\n  }, []);\n\n  const handlePlatSelect = (plat: SelectedPlat) => {\n    setSelectedPlat(plat);\n    setCurrentScreen('platDetails');\n  };\n\n  if (isLoading) {\n    return null;\n  }\n\n  if (!user) {\n    return <Login />;\n  }\n\n  return (\n    <View style={styles.container}>\n      {currentScreen === 'plats' && (\n        <Plats \n          onCartPress={() => setCurrentScreen('cart')}\n          onPlatSelect={handlePlatSelect}\n        />\n      )}\n      {currentScreen === 'cart' && (\n        <Cart onBack={() => setCurrentScreen('plats')} />\n      )}\n      {currentScreen === 'platDetails' && selectedPlat && (\n        <PlatDetails\n          platId={selectedPlat.id}\n          platNom={selectedPlat.nom}\n          onBack={() => setCurrentScreen('plats')}\n          onAddToCart={() => {\n            // Retourner à la liste après ajout au panier\n            setCurrentScreen('plats');\n          }}\n        />\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n  },\n});\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,IAAA,iDAAAC,UAAA,gDAEnD,OAAeC,kBAAkB,CAAEC,OAAO,KAAQ,eAAe,CACjE,OAASC,aAAa,KAAQ,kBAAkB,CAChD,MAAO,CAAAC,KAAK,KAAM,qBAAqB,CACvC,MAAO,CAAAC,KAAK,KAAM,qBAAqB,CACvC,MAAO,CAAAC,IAAI,KAAM,oBAAoB,CACrC,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBASpD,cAAe,SAAS,CAAAC,GAAGA,CAAA,CAAG,CAC5B,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGjB,QAAQ,CAAc,IAAI,CAAC,CACnD,KAAM,CAACkB,SAAS,CAAEC,YAAY,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAACoB,aAAa,CAAEC,gBAAgB,CAAC,CAAGrB,QAAQ,CAAS,OAAO,CAAC,CACnE,KAAM,CAACsB,YAAY,CAAEC,eAAe,CAAC,CAAGvB,QAAQ,CAAsB,IAAI,CAAC,CAE3EC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAuB,MAAM,CAAG,KAAAA,CAAA,GAAY,CACzB,GAAI,CACF,KAAM,CAAAnB,OAAO,CAACC,aAAa,CAAC,CAC9B,CAAE,MAAOmB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACxD,CACF,CAAC,CAEDD,MAAM,CAAC,CAAC,CAER,KAAM,CAAAG,WAAW,CAAGvB,kBAAkB,CAACE,aAAa,CAAGU,IAAI,EAAK,CAC9DC,OAAO,CAACD,IAAI,CAAC,CACbG,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAAC,CAEF,MAAO,CAAAQ,WAAW,CACpB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,gBAAgB,CAAIC,IAAkB,EAAK,CAC/CN,eAAe,CAACM,IAAI,CAAC,CACrBR,gBAAgB,CAAC,aAAa,CAAC,CACjC,CAAC,CAED,GAAIH,SAAS,CAAE,CACb,MAAO,KAAI,CACb,CAEA,GAAI,CAACF,IAAI,CAAE,CACT,MAAO,CAAAJ,IAAA,CAACL,KAAK,GAAE,CAAC,CAClB,CAEA,MACE,CAAAO,KAAA,CAACZ,IAAI,EAAC4B,KAAK,CAAEC,MAAM,CAACC,SAAU,CAAAC,QAAA,EAC3Bb,aAAa,GAAK,OAAO,EACxBR,IAAA,CAACJ,KAAK,EACJ0B,WAAW,CAAEA,CAAA,GAAMb,gBAAgB,CAAC,MAAM,CAAE,CAC5Cc,YAAY,CAAEP,gBAAiB,CAChC,CACF,CACAR,aAAa,GAAK,MAAM,EACvBR,IAAA,CAACH,IAAI,EAAC2B,MAAM,CAAEA,CAAA,GAAMf,gBAAgB,CAAC,OAAO,CAAE,CAAE,CACjD,CACAD,aAAa,GAAK,aAAa,EAAIE,YAAY,EAC9CV,IAAA,CAACF,WAAW,EACV2B,MAAM,CAAEf,YAAY,CAACgB,EAAG,CACxBC,OAAO,CAAEjB,YAAY,CAACkB,GAAI,CAC1BJ,MAAM,CAAEA,CAAA,GAAMf,gBAAgB,CAAC,OAAO,CAAE,CACxCoB,WAAW,CAAEA,CAAA,GAAM,CAEjBpB,gBAAgB,CAAC,OAAO,CAAC,CAC3B,CAAE,CACH,CACF,EACG,CAAC,CAEX,CAEA,KAAM,CAAAU,MAAM,CAAG5B,UAAU,CAACuC,MAAM,CAAC,CAC/BV,SAAS,CAAE,CACTW,IAAI,CAAE,CAAC,CACPC,eAAe,CAAE,MACnB,CACF,CAAC,CAAC","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}