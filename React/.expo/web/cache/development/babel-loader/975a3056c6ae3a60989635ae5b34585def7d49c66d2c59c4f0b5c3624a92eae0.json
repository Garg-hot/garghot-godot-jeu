{"ast":null,"code":"var _jsxFileName = \"c:\\\\Users\\\\socid\\\\OneDrive\\\\Documents\\\\ITU\\\\EXAM WEB\\\\essaiFirebase\\\\App.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { onAuthStateChanged, signOut } from 'firebase/auth';\nimport { FIREBASE_AUTH } from './FirebaseCongig';\nimport Login from './app/screens/Login';\nimport Plats from './app/screens/Plats';\nimport Cart from './app/screens/Cart';\nimport PlatDetails from './app/screens/PlatDetails';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  const [user, setUser] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [currentScreen, setCurrentScreen] = useState('plats');\n  const [selectedPlat, setSelectedPlat] = useState(null);\n  useEffect(() => {\n    const logout = async () => {\n      try {\n        await signOut(FIREBASE_AUTH);\n      } catch (error) {\n        console.error('Erreur lors de la déconnexion:', error);\n      }\n    };\n    logout();\n    const unsubscribe = onAuthStateChanged(FIREBASE_AUTH, user => {\n      setUser(user);\n      setIsLoading(false);\n    });\n    return unsubscribe;\n  }, []);\n  const handlePlatSelect = plat => {\n    setSelectedPlat(plat);\n    setCurrentScreen('platDetails');\n  };\n  if (isLoading) {\n    return null;\n  }\n  if (!user) {\n    return _jsxDEV(Login, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 12\n    }, this);\n  }\n  return _jsxDEV(View, {\n    style: styles.container,\n    children: [currentScreen === 'plats' && _jsxDEV(Plats, {\n      onCartPress: () => setCurrentScreen('cart'),\n      onPlatSelect: handlePlatSelect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this), currentScreen === 'cart' && _jsxDEV(Cart, {\n      onBack: () => setCurrentScreen('plats')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this), currentScreen === 'platDetails' && selectedPlat && _jsxDEV(PlatDetails, {\n      platId: selectedPlat.id,\n      platNom: selectedPlat.nom,\n      onBack: () => setCurrentScreen('plats'),\n      onAddToCart: () => {\n        setCurrentScreen('plats');\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","View","StyleSheet","onAuthStateChanged","signOut","FIREBASE_AUTH","Login","Plats","Cart","PlatDetails","jsxDEV","_jsxDEV","App","user","setUser","isLoading","setIsLoading","currentScreen","setCurrentScreen","selectedPlat","setSelectedPlat","logout","error","console","unsubscribe","handlePlatSelect","plat","fileName","_jsxFileName","lineNumber","columnNumber","style","styles","container","children","onCartPress","onPlatSelect","onBack","platId","id","platNom","nom","onAddToCart","create","flex","backgroundColor"],"sources":["c:/Users/socid/OneDrive/Documents/ITU/EXAM WEB/essaiFirebase/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport { User, onAuthStateChanged, signOut } from 'firebase/auth';\nimport { FIREBASE_AUTH } from './FirebaseCongig';\nimport Login from './app/screens/Login';\nimport Plats from './app/screens/Plats';\nimport Cart from './app/screens/Cart';\nimport PlatDetails from './app/screens/PlatDetails';\n\ntype Screen = 'plats' | 'cart' | 'platDetails';\n\ninterface SelectedPlat {\n  id: string;\n  nom: string;\n}\n\nexport default function App() {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [currentScreen, setCurrentScreen] = useState<Screen>('plats');\n  const [selectedPlat, setSelectedPlat] = useState<SelectedPlat | null>(null);\n\n  useEffect(() => {\n    const logout = async () => {\n      try {\n        await signOut(FIREBASE_AUTH);\n      } catch (error) {\n        console.error('Erreur lors de la déconnexion:', error);\n      }\n    };\n    \n    logout();\n\n    const unsubscribe = onAuthStateChanged(FIREBASE_AUTH, (user) => {\n      setUser(user);\n      setIsLoading(false);\n    });\n\n    return unsubscribe;\n  }, []);\n\n  const handlePlatSelect = (plat: SelectedPlat) => {\n    setSelectedPlat(plat);\n    setCurrentScreen('platDetails');\n  };\n\n  if (isLoading) {\n    return null;\n  }\n\n  if (!user) {\n    return <Login />;\n  }\n\n  return (\n    <View style={styles.container}>\n      {currentScreen === 'plats' && (\n        <Plats \n          onCartPress={() => setCurrentScreen('cart')}\n          onPlatSelect={handlePlatSelect}\n        />\n      )}\n      {currentScreen === 'cart' && (\n        <Cart onBack={() => setCurrentScreen('plats')} />\n      )}\n      {currentScreen === 'platDetails' && selectedPlat && (\n        <PlatDetails\n          platId={selectedPlat.id}\n          platNom={selectedPlat.nom}\n          onBack={() => setCurrentScreen('plats')}\n          onAddToCart={() => {\n            // Retourner à la liste après ajout au panier\n            setCurrentScreen('plats');\n          }}\n        />\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}